# ==============================================
# RABBITMQ CONFIGURATION FOR LOGGING PLATFORM
# ==============================================

# Network Configuration
listeners.tcp.default = 5672
management.tcp.port = 15672
management.tcp.ip = 0.0.0.0

# Node Configuration
# nodename is set via hostname in docker-compose

# Security Configuration
default_user = obs_user
default_pass = obs_password
default_vhost = /observability

# Allow guest user from external connections
loopback_users = none

# Memory Configuration
vm_memory_high_watermark.relative = 0.6
vm_memory_high_watermark_paging_ratio = 0.5
disk_free_limit.relative = 2.0

# Connection Configuration
heartbeat = 60
frame_max = 131072
channel_max = 2047
connection_max = 1000

# Clustering Configuration
# Single node setup - no clustering needed for development
# cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config
# cluster_formation.classic_config.nodes.1 = rabbit@obs_rabbitmq

# Management Plugin Configuration
# management.load_definitions = /etc/rabbitmq/definitions.json
management.rates_mode = basic

# SSL Configuration (for production)
# ssl_options.cacertfile = /etc/ssl/certs/ca-certificates.crt
# ssl_options.certfile = /etc/ssl/certs/server.crt
# ssl_options.keyfile = /etc/ssl/private/server.key
# ssl_options.verify = verify_peer
# ssl_options.fail_if_no_peer_cert = true

# Logging Configuration
log.console = true
log.console.level = info
log.file = /var/log/rabbitmq/rabbit.log
log.file.level = info
log.file.rotation.date = $D0
log.file.rotation.size = 10485760

# Queue Configuration
queue_master_locator = min-masters
queue_index_embed_msgs_below = 4096

# Message Store Configuration (removed deprecated settings)

# Performance Tuning
hipe_compile = false
collect_statistics = coarse
collect_statistics_interval = 5000

# Plugin Configuration (removed deprecated settings)

# Dead Letter Exchange Configuration
consumer_timeout = 900000

# Federation Configuration (for future use)
# federation_upstream.source.uri = amqp://guest:guest@source-server:5672
# federation_upstream.source.exchange = source-exchange 